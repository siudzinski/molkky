@page "/"
@using Domain;

<PageTitle>Game</PageTitle>

<h1>Game</h1>

<p role="status">Winner: <b>@game.Winner?.Name</b></p>

<p role="status">Current player: @game.CurrentPlayer.Name</p>

<div class="container">
    <div class="row">
        @for (int i = 0; i <= 12; i++)
        {
            var score = i;
            <div class="col-3">
                <button class="btn btn-primary btn-fixed-size my-2" @onclick="() => AddScore(score)">
                    <span>@i</span>
                </button>
            </div>
        }
    </div>
</div>

<h2>Players:</h2>
<ul>
    @for (int i = 0; i < game.Players.Count; i++)
    {
        var player = game.Players[i];
        <li>@(i + 1). @player.Name - Score: @player.Score</li>
    }
</ul>

@if(game.Losers.Any())
{
    <h2>Losers:</h2>
    <ul>
        @for (int i = 0; i < game.Losers.Count; i++)
        {
            var loser = game.Losers[i];
            <li>@(i + 1). @loser.Name</li>
        }
    </ul>
}

@code {
    private Game game = Game.CreateNew(
        new List<Player> 
        { 
            new Player { Name = "test001" }, 
            new Player { Name = "test002" },
            new Player { Name = "test003" },
            new Player { Name = "test004" }
        });

    private void AddScore(int score)
    {
        game.SetThrowScoreForCurrentPlayer(score);
    }
}
